function prepararPeticion(n,t){t.validate();var i=t.find('button[type="submit"]');if(t.find(".modal-errores").html(""),t.valid())monoloading("show"),i.prop("disabled",!0);else return Console.log("error"),t.find(".modal-errores").html("Error"),i.prop("disabled",!1),!1}function ejecutarRespuesta(n,t,i,r){var f=n,u=r.parents(".modal");u.find('button[type="submit"]').prop("disabled",!1);monoloading("hide");u.find(".modal-errores").html("");f.status==="ok"?(u.modal("hide"),monotoast(f.body),attemptRefreshGrids(r)):u.find(".modal-errores").html(`<p>${f.body}</p>`)}function attemptRefreshGrids(n){var t=n.data("refresh-grids");t==!0?refreshGrids():typeof n.find(".datatable")!="undefined"&&document.getElementsByClassName("datatable")[document.getElementsByClassName("datatable").length-1].ej2_instances[0].refresh()}function refreshGrids(){for(var t=document.getElementsByClassName("datatable").length,n=0;n<t;n++)document.getElementsByClassName("datatable")[n].ej2_instances[0].refresh()}function ejecutarRespuestaForma(n,t,i,r){var u=n;r.find('button[type="submit"]').prop("disabled",!1);monoloading("hide");r.find(".modal-errores").html("");u.status==="ok"?(r.resetForm(),attemptRefreshGrids(r),monotoast(u.body)):r.find(".modal-errores").html(`<p>${u.body}</p>`)}function ejecutarRespuestaOld(n,t,i,r){var u=n,f=r.parents(".modal");f.find(".modal-errores").html("");u.status==="ok"?(Cookies.set("consola-toast",u.body),window.location.reload()):(monoloading("hide"),f.find('button[type="submit"]').prop("disabled",!1),f.find(".modal-errores").html(`<p>${u.body}</p>`))}function mostrarError(n,t,i,r){r.find('[type="submit"]').prop("disabled",!1);monoloading("hide");n.status===401?r.find(".modal-errores").html("<p>Tu sesión caducó, por favor <a href='/' target='_blank'>inicia sesión<\/a> e intenta de nuevo<\/p>"):n.status===500?r.find(".modal-errores").html("<p>Ocurrió un error en el servidor<\/p>"):r.find(".modal-errores").html("<p>Ocurrió un error inesperado<\/p>")}function monomiddle(n){$("#alertTop").html(`<div class="mono-middle scene_element scene_element--fadeindown shadow-z-1">${n}</div>`)}function monoloading(n){n==="show"?monomiddle('<i class="fa fa-2x fa-spinner fa-pulse"><\/i>'):n==="hide"&&$(".mono-middle").animate({top:-100,opacity:0})}function initializeMap(){originalPosition=new google.maps.LatLng(32.774280352542732,-115.51078715624999);geocoder=new google.maps.Geocoder;var n={zoom:8,center:originalPosition};map=new google.maps.Map(document.getElementById("map-canvas"),n)}function putMarker(){originalPosition===null&&(originalPosition=new google.maps.LatLng(32.774280352542732,-115.51078715624999));marker=new google.maps.Marker({position:originalPosition,map:map,animation:google.maps.Animation.DROP,draggable:!0,title:"Move me to the right position"});marker.setMap(map)}function codeAddress(n){geocoder.geocode({address:n},function(n,t){return t===google.maps.GeocoderStatus.OK?(originalPosition=n[0].geometry.location,map.setZoom(15),map.setCenter(originalPosition),marker.setPosition(originalPosition),onCodeAddressSuccess(),!0):!1})}function onCodeAddressSuccess(){return!0}function mostrarErrorSnack(){monoloading("hide");monotoast("Ocurrió un error inesperado")}function showMessageByResult(){var n=Cookies.get("consola-toast");typeof n!="undefined"&&n!=""&&showToast(n)}function showToast(n){monotoast(n);Cookies.remove("consola-toast")}function removeMessageCookie(){Cookies.remove("consola-toast")}function monotoast(n){$("#alert").html(`<div class="mono-toast scene_element scene_element--fadeinup">${n}</div>`);setTimeout(function(){$(".mono-toast").animate({bottom:-100,opacity:0})},3e3)}var map,geocoder,marker,originalPosition;$(function(){$(".forma-ajax--modal").ajaxForm(opcionesFormaModal);$(".forma-ajax").ajaxForm(opcionesForma);$(".forma-ajax--modal-refresh").ajaxForm(opcionesFormaModalOld)});var opcionesFormaModal={beforeSubmit:prepararPeticion,success:ejecutarRespuesta,error:mostrarError},opcionesFormaModalOld={beforeSubmit:prepararPeticion,success:ejecutarRespuestaOld,error:mostrarError},opcionesForma={beforeSubmit:prepararPeticion,success:ejecutarRespuestaForma,error:mostrarError};$(document).on("show.bs.modal",".modal",function(){var n=1040+10*$(".modal:visible").length;$(this).css("z-index",n);setTimeout(function(){$(".modal-backdrop").not(".modal-stack").css("z-index",n-1).addClass("modal-stack")},0)});$(document).on("shown.bs.modal",".modal",function(){$(this).find(".select2")!=="undefined"&&$(this).find(".select2").each(function(n,t){var i=$(t);typeof i.attr("placeholder")!="undefined"?i.select2({placeholder:i.attr("placeholder"),allowClear:!0}):i.select2()})});$(document).on("hidden.bs.modal",".modal",function(){$(".modal").hasClass("show")&&$("body").addClass("modal-open")});$(document).on("hide.bs.modal",".modal",function(){$(this).find(".datatable-server-side").length>0&&$dataTables.pop()});$(document).on("click",".btn-modal-action",function(n){n.preventDefault();var u=$(this),e=u.attr("href"),t=$(e),r=t.data("url"),i=t,f=u.data("id");typeof f!="undefined"&&(r=r+"/"+f);monoloading("show");$.get(r,function(n){monoloading("hide");i.html(n);var r=t.find("form");$.isEmptyObject(r)||$.validator.unobtrusive.parse(r);i.find(".forma-ajax").ajaxForm(opcionesForma);i.find(".forma-ajax--modal").ajaxForm(opcionesFormaModal);i.find(".forma-ajax--modal-refresh").ajaxForm(opcionesFormaModalOld);t.on("hidden.bs.modal",function(){i.html(null)});t.modal("show")}).fail(mostrarErrorSnack)});$(document).ready(function(){showMessageByResult()});$(".collapse-focus-first").on("shown.bs.collapse",function(){$(this).find('input:not([type="hidden"]):first').focus()});$(".modal-focus-first").on("shown.bs.modal",function(){$(this).find('input:not([type="hidden"]):first').focus()});